(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n;a=window;b=a.LoginPage=a.LoginPage||{};c=b.Client=b.Client||{};d=a.LoginPage_Templates=a.LoginPage_Templates||{};e=a.WebSharper;f=e&&e.UI;g=f&&f.Next;h=g&&g.Var;i=e&&e.List;j=e&&e.Concurrency;k=g&&g.View;l=e&&e.Remoting;m=l&&l.AjaxRemotingProvider;n=g&&g.Doc;c.Main=function(o){var p,q,r,s,t,u;p=h.Create$1("");q=h.Create$1("");return d.login((r=(s=(t=i.T.Empty,new i.T({$:1,$0:{$:6,$0:"uname",$1:p},$1:t})),new i.T({$:1,$0:{$:6,$0:"password",$1:q},$1:s})),(u=function(v,w){return c.login(p,q,v,w);},new i.T({$:1,$0:{$:4,$0:"signin",$1:function(v){return function(w){return u(v,w);};}},$1:r}))));};c.login=function(o,p,q,r){j.Start(j.Delay(function(){var s;s=k.GetAsync(o.RView());return j.Bind(s,function(t){var u;u=k.GetAsync(p.RView());return j.Bind(u,function(v){var w;w=(new m.New()).Async("LoginPage:LoginPage.Server.Login:380063967",[{Username:t,Password:v}]);return j.Bind(w,function(x){var y;y=(x!=null?x.$==1:false)?(a.alert("Succesfully logged in"),j.Return(null)):(a.alert("Invalid login data"),j.Return(null));return j.Combine(y,j.Delay(function(){return j.Return(null);}));});});});}),null);};d.login=function(o){var p,q;p={$:1,$0:"login"};q=function(){return a.jQuery.parseHTML("<div class=\"login-class\">\r\n    <div>Username: </div>\r\n    <input placeholder=\"required\" ws-var=\"UName\" type=\"text\">\r\n    <div>Password: </div>\r\n    <input type=\"password\" placeholder=\"required\" ws-var=\"Password\">\r\n    <button class=\"login-btn\" ws-onclick=\"SignIn\">Sign in!</button>\r\n</div>");};return o?n.GetOrLoadTemplate("login",p,q,o):n.PrepareTemplate("login",p,q);};}());
