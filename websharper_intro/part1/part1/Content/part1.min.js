function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Cctor:function(n){var t=!0;return function(){t&&(t=!1,n())}},Class:function(n,t,i){var e=t?new t:{},r=function(n){if(n)for(var t in n)this[t]=n[t]},u,f;for(u in n)e[u]=n[u];if(r.prototype=e,i)for(f in i)r[f]=i[f];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"init"in this&&(n(this.init),this.init=[]);"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo;a=window;b=a.part1=a.part1||{};c=b.Client=b.Client||{};d=a.WebSharper=a.WebSharper||{};e=d.UI=d.UI||{};f=e.Next=e.Next||{};g=f.Var=f.Var||{};h=d.Operators=d.Operators||{};i=d.Ref=d.Ref||{};j=d.List=d.List||{};k=j.T=j.T||{};l=f.ListModel=f.ListModel||{};m=d.Arrays=d.Arrays||{};n=a.part1_Templates=a.part1_Templates||{};o=f.Snap=f.Snap||{};p=f.Abbrev=f.Abbrev||{};q=p.Fresh=p.Fresh||{};r=a.StartupCode$part1$Client=a.StartupCode$part1$Client||{};s=d.JavaScript=d.JavaScript||{};t=s.Pervasives=s.Pervasives||{};u=f.Doc=f.Doc||{};v=d.Int32=d.Int32||{};w=d.Collections=d.Collections||{};x=w.Dictionary=w.Dictionary||{};y=d.Unchecked=d.Unchecked||{};z=f.DomUtility=f.DomUtility||{};A=a.StartupCode$WebSharper_UI_Next$Abbrev=a.StartupCode$WebSharper_UI_Next$Abbrev||{};B=f.View=f.View||{};C=f.Docs=f.Docs||{};D=s.JSModule=s.JSModule||{};E=d.Seq=d.Seq||{};F=f.Client=f.Client||{};G=F.DocNode=F.DocNode||{};H=a.StartupCode$WebSharper_UI_Next$DomUtility=a.StartupCode$WebSharper_UI_Next$DomUtility||{};I=p.Mailbox=p.Mailbox||{};J=f.Storage=f.Storage||{};K=a.StartupCode$WebSharper_UI_Next$Doc_Client=a.StartupCode$WebSharper_UI_Next$Doc_Client||{};L=f.Attrs=f.Attrs||{};M=f.CheckedInput=f.CheckedInput||{};N=f.DocElemNode=f.DocElemNode||{};O=f.AttrModule=f.AttrModule||{};P=f.AttrProxy=f.AttrProxy||{};Q=d.Slice=d.Slice||{};R=d.Strings=d.Strings||{};S=f.Array=f.Array||{};T=f.Elt=f.Elt||{};U=d.Enumerator=d.Enumerator||{};V=F.Docs=F.Docs||{};W=V.RunState=V.RunState||{};X=V.NodeSet=V.NodeSet||{};Y=f.An=f.An||{};Z=p.Async=p.Async||{};_0=J.ArrayStorage=J.ArrayStorage||{};_1=w.HashSet=w.HashSet||{};_2=w.DictionaryUtil=w.DictionaryUtil||{};_3=F.Attrs=F.Attrs||{};_4=_3.Dyn=_3.Dyn||{};_5=f.String=f.String||{};_6=d.Concurrency=d.Concurrency||{};_7=f.Anims=f.Anims||{};_8=f.AppendList=f.AppendList||{};_9=U.T=U.T||{};_=d.Char=d.Char||{};$=d.N=d.N||{};ba=f.DynamicAttrNode=f.DynamicAttrNode||{};bb=a.StartupCode$WebSharper_UI_Next$Attr_Client=a.StartupCode$WebSharper_UI_Next$Attr_Client||{};bc=a.StartupCode$WebSharper_UI_Next$Animation=a.StartupCode$WebSharper_UI_Next$Animation||{};bd=p.HashSet=p.HashSet||{};be=_6.Scheduler=_6.Scheduler||{};bf=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bg=f.Easing=f.Easing||{};bh=V.DomNodes=V.DomNodes||{};bi=d.OperationCanceledException=d.OperationCanceledException||{};bj=d.CancellationTokenSource=d.CancellationTokenSource||{};bk=w.HashSetUtil=w.HashSetUtil||{};bl=a.StartupCode$WebSharper_UI_Next$AppendList=a.StartupCode$WebSharper_UI_Next$AppendList||{};bm=d.Lazy=d.Lazy||{};bn=a.IntelliFactory;bo=bn&&bn.Runtime;c.Main=function(){var bp,bq,br,bs,bt,bu,bv,bw;bp=g.Create$1("");bq=n.main((br=(bs=(bt=k.Empty,(bu=(bv=c.People().v,u.Convert(function(bx){var by;return n.listitem((by=k.Empty,new k({$:1,$0:{$:1,$0:"name",$1:bx},$1:by})));},bv)),new k({$:1,$0:{$:0,$0:"listcontainer",$1:bu},$1:bt}))),new k({$:1,$0:{$:6,$0:"name",$1:bp},$1:bs})),new k({$:1,$0:{$:4,$0:"add",$1:(bw=function(){c.People().Append(bp.c);g.Set(bp,"");},function(){return function(){return bw();};})},$1:br})));u.RunById("main",bq);};c.People=function(){r.$cctor();return r.People;};g.Create$1=function(bp){var bq;bq=null;bq=g.New(false,bp,o.CreateWithValue(bp),q.Int(),function(){return bq.s;});return bq;};g.Set=function(bp,bq){if(bp.o)(function(br){return br("WebSharper UI.Next: invalid attempt to change value of a Var after calling SetFinal");}(function(br){a.console.log(br);}));else{o.MarkObsolete(bp.s);bp.c=bq;bp.s=o.CreateWithValue(bq);}};h.FailWith=function(bp){throw a.Error(bp);};h.DefaultArg=function(bp,bq){return bp==null?bq:bp.$0;};h.KeyValue=function(bp){return[bp.K,bp.V];};i.decr=function(bp){bp[0]--;};h.Compare=function(bp,bq){return y.Compare(bp,bq);};k=j.T=bo.Class({GetEnumerator:function(){return new _9.New(this,null,function(bp){var bq,br;bq=bp.s;return bq.$==0?false:(br=bq.$1,(bp.c=bq.$0,bp.s=br,true));},void 0);},GetEnumerator0:function(){return U.Get(this);}},null,k);k.Empty=new k({$:0});l=f.ListModel=bo.Class({Append:function(bp){var bq,br,bs,bt;bq=this;br=this["var"].RVal();bs=this.key(bp);bt=m.tryFindIndex(function(bu){return y.Equals(bq.key(bu),bs);},br);(bt!=null?bt.$==1:false)?this["var"].set_RVal(this.storage.SSetAt(bt.$0,bp,br)):this["var"].set_RVal(this.storage.SAppend(bp,br));this.ObsoleteKey(bs);},ObsoleteKey:function(bp){var bq,br,bs,bt;bq=(br=null,[this.it.TryGetValue(bp,{get:function(){return br;},set:function(bu){br=bu;}}),br]);bq[0]?(bs=bq[1],o.MarkObsolete(bs),bt=this.it.Remove(bp)):void 0;},GetEnumerator:function(){return U.Get(this["var"].RVal());},GetEnumerator0:function(){return U.Get0(this["var"].RVal());}},null,l);l.New=bo.Ctor(function(bp,bq){var br;br=g.Create$1(m.ofSeq(E.distinctBy(bp,bq.SInit())));l.New$3.call(this,bp,br,bq);},l);l.New$3=bo.Ctor(function(bp,bq,br){var bs;this.key=bp;this["var"]=bq;this.storage=br;this.v=(bs=this["var"].RView(),B.Map(function(bt){return bt.slice();},bs));this.it=new x.New$5();},l);m.get=function(bp,bq){m.checkBounds(bp,bq);return bp[bq];};m.set=function(bp,bq,br){m.checkBounds(bp,bq);bp[bq]=br;};m.checkBounds=function(bp,bq){if(bq<0?true:bq>=bp.length)h.FailWith("Index was outside the bounds of the array.");};m.length=function(bp){return bp.dims===2?bp.length*bp.length:bp.length;};n.listitem=function(bp){u.LoadLocalTemplates("index");return bp?u.NamedTemplate("index",{$:1,$0:"listitem"},bp):void 0;};n.main=function(bp){u.LoadLocalTemplates("index");return bp?u.NamedTemplate("index",{$:1,$0:"main"},bp):void 0;};g=f.Var=bo.Class({RVal:function(){return this.c;},set_RVal:function(bp){g.Set(this,bp);},RView:function(){return this.v;},RUpdM:function(bp){var bq,br;bq=bp(this.c);(bq!=null?bq.$==1:false)?(br=bq.$0,g.Set(this,br)):void 0;}},null,g);g.New=function(bp,bq,br,bs,bt){return new g({o:bp,c:bq,s:br,i:bs,v:bt});};o.CreateWithValue=function(bp){return o.Make({$:2,$0:bp,$1:[]});};o.Make=function(bp){return{s:bp};};o.MarkObsolete=function(bp){var bq,br;bq=bp.s;(bq.$==1?true:bq.$==2?(br=bq.$1,false):bq.$==3?(br=bq.$1,false):true)?void 0:(bp.s={$:1},E.iter(function(bs){bs();},br));};o.When=function(bp,bq,br){var bs,bt,bu;bs=bp.s;bs.$==1?br():bs.$==2?(bt=bs.$0,bs.$1.push(br),bq(bt)):bs.$==3?(bu=bs.$1,bs.$0.push(bq),bu.push(br)):bq(bs.$0);};o.Map=function(bp,bq){var br,bs,bt,bu;br=bq.s;return br.$==0?(bs=br.$0,o.CreateForever(bp(bs))):(bt=o.Create(),(o.When(bq,(bu=function(bv){o.MarkDone(bt,bq,bv);},function(bv){return bu(bp(bv));}),o.Obs(bt)),bt));};o.Map3=function(bp,bq,br,bs){var bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ;function bK(bL){var bM,bN,bO,bP,bQ,bR,bS,bT,bU;if(!o.IsDone(bI)){bM=o.ValueAndForever(bq);bN=o.ValueAndForever(br);bO=o.ValueAndForever(bs);(bM!=null?bM.$==1:false)?(bN!=null?bN.$==1:false)?(bO!=null?bO.$==1:false)?(bP=bM.$0[1],bQ=bN.$0[1],bR=bO.$0[1],bS=bM.$0[0],bT=bN.$0[0],bU=bO.$0[0],((bP?bQ:false)?bR:false)?o.MarkForever(bI,bp(bS,bT,bU)):o.MarkReady(bI,bp(bS,bT,bU))):void 0:void 0:void 0;}}bt=bq.s;bu=br.s;bv=bs.s;return bt.$==0?bu.$==0?bv.$==0?(bw=bt.$0,(bx=bu.$0,(by=bv.$0,o.CreateForever(bp(bw,bx,by))))):(bz=bt.$0,(bA=bu.$0,o.Map(function(bL){return bp(bz,bA,bL);},bs))):bv.$==0?(bB=bt.$0,(bC=bv.$0,o.Map(function(bL){return bp(bB,bL,bC);},br))):(bD=bt.$0,o.Map2(function(bL,bM){return bp(bD,bL,bM);},br,bs)):bu.$==0?bv.$==0?(bE=bu.$0,(bF=bv.$0,o.Map(function(bL){return bp(bL,bE,bF);},bq))):(bG=bu.$0,o.Map2(function(bL,bM){return bp(bL,bG,bM);},bq,bs)):bv.$==0?(bH=bv.$0,o.Map2(function(bL,bM){return bp(bL,bM,bH);},bq,br)):(bI=o.Create(),(bJ=o.Obs(bI),(o.When(bq,bK,bJ),o.When(br,bK,bJ),o.When(bs,bK,bJ),bI)));};o.Sequence=function(bp){var bq,br,bs,bt,bu,bv;bq=m.ofSeq(bp);return bq.length==0?o.CreateForever([]):(br=o.Create(),(bs=[m.length(bq)-1],(bt=o.Obs(br),(bu=function(){var bw,bx;if(bs[0]===0){bw=(bx=function(by){var bz;bz=by.s;return bz.$==0?bz.$0:bz.$==2?bz.$0:h.FailWith("value not found by View.Sequence");},function(by){return m.map(bx,by);}(bq));m.forall(o.IsForever,bq)?o.MarkForever(br,bw):o.MarkReady(br,bw);}else i.decr(bs);},(bv=function(bw){o.When(bw,bu,bt);},function(bw){m.iter(bv,bw);}(bq),br)))));};o.Map2=function(bp,bq,br){var bs,bt,bu,bv,bw,bx,by,bz;function bA(bB){var bC,bD,bE,bF,bG,bH;if(!o.IsDone(by)){bC=o.ValueAndForever(bq);bD=o.ValueAndForever(br);(bC!=null?bC.$==1:false)?(bD!=null?bD.$==1:false)?(bE=bC.$0[1],bF=bD.$0[1],bG=bC.$0[0],bH=bD.$0[0],(bE?bF:false)?o.MarkForever(by,bp(bG,bH)):o.MarkReady(by,bp(bG,bH))):void 0:void 0;}}bs=bq.s;bt=br.s;return bs.$==0?bt.$==0?(bu=bs.$0,(bv=bt.$0,o.CreateForever(bp(bu,bv)))):(bw=bs.$0,o.Map(function(bB){return bp(bw,bB);},br)):bt.$==0?(bx=bt.$0,o.Map(function(bB){return bp(bB,bx);},bq)):(by=o.Create(),(bz=o.Obs(by),(o.When(bq,bA,bz),o.When(br,bA,bz),by)));};o.CreateForever=function(bp){return o.Make({$:0,$0:bp});};o.Map2Unit=function(bp,bq){var br,bs,bt,bu;function bv(){var bw,bx,by,bz;if(!o.IsDone(bt)){bw=o.ValueAndForever(bp);bx=o.ValueAndForever(bq);(bw!=null?bw.$==1:false)?(bx!=null?bx.$==1:false)?(by=bw.$0[1],bz=bx.$0[1],(by?bz:false)?o.MarkForever(bt,null):o.MarkReady(bt,null)):void 0:void 0;}}br=bp.s;bs=bq.s;return br.$==0?bs.$==0?o.CreateForever():bq:bs.$==0?bp:(bt=o.Create(),(bu=o.Obs(bt),(o.When(bp,bv,bu),o.When(bq,bv,bu),bt)));};o.IsForever=function(bp){return bp.s.$==0?true:false;};o.WhenObsolete=function(bp,bq){var br;br=bp.s;br.$==1?bq():br.$==2?br.$1.push(bq):br.$==3?br.$1.push(bq):void 0;};o.Create=function(){return o.Make({$:3,$0:[],$1:[]});};o.MarkDone=function(bp,bq,br){if(o.IsForever(bq))o.MarkForever(bp,br);else o.MarkReady(bp,br);};o.Obs=function(bp){return function(){o.MarkObsolete(bp);};};o.IsDone=function(bp){var bq;bq=bp.s;return bq.$==0?true:bq.$==2?true:false;};o.ValueAndForever=function(bp){var bq;bq=bp.s;return bq.$==0?{$:1,$0:[bq.$0,true]}:bq.$==2?{$:1,$0:[bq.$0,false]}:null;};o.MarkForever=function(bp,bq){var br,bs;br=bp.s;br.$==3?(bs=br.$0,bp.s={$:0,$0:bq},E.iter(function(bt){bt(bq);},bs)):void 0;};o.MarkReady=function(bp,bq){var br,bs,bt;br=bp.s;br.$==3?(bs=br.$1,bt=br.$0,bp.s={$:2,$0:bq,$1:bs},E.iter(function(bu){bu(bq);},bt)):void 0;};o.Join=function(bp){var bq,br;bq=o.Create();br=o.Obs(bq);o.When(bp,function(bs){var bt;bt=bs();o.When(bt,function(bu){if(o.IsForever(bt)?o.IsForever(bp):false)o.MarkForever(bq,bu);else o.MarkReady(bq,bu);},br);},br);return bq;};q.Int=function(){q.set_counter(q.counter()+1);return q.counter();};q.set_counter=function(bp){A.$cctor();A.counter=bp;};q.counter=function(){A.$cctor();return A.counter;};r.$cctor=bo.Cctor(function(){r.People=l.FromSeq(["John","Paul"]);r.$cctor=a.ignore;});t.NewFromSeq=function(bp){var bq,br,bs;bq={};br=U.Get(bp);try{while(br.MoveNext()){bs=br.Current();bq[bs[0]]=bs[1];}}finally{if("Dispose"in br)br.Dispose();}return bq;};u=f.Doc=bo.Class({},null,u);u.RunById=function(bp,bq){var br;br=z.Doc().getElementById(bp);y.Equals(br,null)?h.FailWith("invalid id: "+bp):u.Run(br,bq);};u.Convert=function(bp,bq){return u.Flatten(B.MapSeqCached(bp,bq));};u.LoadLocalTemplates=function(bp){(function(){var bq,br,bs,bt,bu;while(true){br=a.document.querySelector("[ws-template]");if(y.Equals(br,null)){bs=a.document.querySelector("[ws-children-template]");if(y.Equals(bs,null))return null;else{bt=bs.getAttribute("ws-children-template");bs.removeAttribute("ws-children-template");bq=function(bv){return function(){return z.ChildrenArray(bv);};}(bs);u.PrepareTemplate(bp,{$:1,$0:bt},bq);}}else{bu=br.getAttribute("ws-template");u.PrepareSingleTemplate(bp,{$:1,$0:bu},br);}}}());};u.NamedTemplate=function(bp,bq,br){var bs,bt,bu,bv,bw;bs=u.ComposeName(bp,bq);bt=(bu=null,[C.LoadedTemplates().TryGetValue(bs,{get:function(){return bu;},set:function(bx){bu=bx;}}),bu]);return bt[0]?(bv=bt[1],(bw=bv.cloneNode(true),u.ChildrenTemplate(bw,br))):(a.console.warn.apply(a.console,["Local template doesn't exist"].concat([bs])),u.Empty());};u.Run=function(bp,bq){var br,bs,bt,bu;br=bq.docNode;C.LinkElement(bp,br);bs=C.CreateRunState(bp,br);bt=I.StartProcessor(C.PerformAnimatedUpdate(bs,br));bu=bq.updates;B.Sink(bt,bu);};u.Flatten=function(bp){return u.EmbedView(B.Map(u.Concat,bp));};u.PrepareTemplate=function(bp,bq,br){var bs,bt,bu,bv,bw,bx;if(!C.LoadedTemplates().ContainsKey(u.ComposeName(bp,bq))){bs=br();for(bt=0,bu=bs.length-1;bt<=bu;bt++){bv=m.get(bs,bt);bw=bv.parentNode;y.Equals(bw,null)?void 0:bx=bw.removeChild(bv);}u.PrepareTemplateStrict(bp,bq,bs);}};u.PrepareSingleTemplate=function(bp,bq,br){var bs,bt,bu,bv;br.removeAttribute("ws-template");bs=br.getAttribute("ws-replace");bs===null?void 0:(br.removeAttribute("ws-replace"),bt=br.parentNode,y.Equals(bt,null)?void 0:(bu=a.document.createElement(br.tagName),bu.setAttribute("ws-replace",bs),bv=bt.replaceChild(bu,br)));u.PrepareTemplateStrict(bp,bq,[br]);};u.ComposeName=function(bp,bq){return(bp+"/"+h.DefaultArg(bq,"")).toLowerCase();};u.ChildrenTemplate=function(bp,bq){var br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG;bA=[];bB=[];bC=[];bD=[];bE=new x.New$5();bF=U.Get(bq);try{while(bF.MoveNext()){bG=bF.Current();bE.set_Item(bG.$0,bG);}}finally{if("Dispose"in bF)bF.Dispose();}br=z.ChildrenArray(bp);bs=function(bH,bI){var bJ,bK,bL,bM;bJ=L.Insert(bH,bI);bK=bB.push(L.Updates(bJ));bL=bC.push([bH,bJ]);bM=function(bN){var bO;bO=bD.push(function(){bN(bH);});};return function(bN){if(bN==null);else bM(bN.$0);}(bo.GetOptional(bJ.OnAfterRender));};bt=function(bH){var bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW;bI=(bJ=null,[bE.TryGetValue(bH,{get:function(){return bJ;},set:function(bX){bJ=bX;}}),bJ]);return bI[0]?bI[1].$==0?{$:1,$0:bI[1].$1}:bI[1].$==1?(bK=bI[1].$1,{$:1,$0:u.TextNode(bK)}):bI[1].$==2?(bL=bI[1].$1,{$:1,$0:u.TextView(bL)}):bI[1].$==6?(bM=bI[1].$1,{$:1,$0:u.TextView(bM.RView())}):bI[1].$==7?(bN=bI[1].$1,{$:1,$0:u.TextView((bO=bN.RView(),B.Map(a.String,bO)))}):bI[1].$==8?(bP=bI[1].$1,{$:1,$0:u.TextView((bQ=bP.RView(),B.Map(function(bX){return bX.get_Input();},bQ)))}):bI[1].$==9?(bR=bI[1].$1,{$:1,$0:u.TextView((bS=bR.RView(),B.Map(a.String,bS)))}):bI[1].$==10?(bT=bI[1].$1,{$:1,$0:u.TextView((bU=bT.RView(),B.Map(function(bX){return bX.get_Input();},bU)))}):bI[1].$==11?(bV=bI[1].$1,{$:1,$0:u.TextView((bW=bV.RView(),B.Map(a.String,bW)))}):(a.console.warn.apply(a.console,["Content hole filled with attribute data"].concat([bH])),null):null;};z.IterSelector(bp,"[ws-hole]",function(bH){var bI,bJ,bK,bL,bM,bN;bM=bH.getAttribute("ws-hole");bH.removeAttribute("ws-hole");while(bH.hasChildNodes()){bN=bH.removeChild(bH.lastChild);}bI=bt(bM);(bI!=null?bI.$==1:false)?(bJ=bI.$0,C.LinkElement(bH,bJ.docNode),bK=bA.push(N.New(L.Empty(bH),bJ.docNode,null,bH,q.Int(),null)),bL=bB.push(bJ.updates)):void 0;});z.IterSelector(bp,"[ws-replace]",function(bH){var bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS;bI=bH.getAttribute("ws-replace");bJ=bt(bI);(bJ!=null?bJ.$==1:false)?(bK=bJ.$0,bL=bH.parentNode,bM=a.document.createTextNode(""),bN=bL.replaceChild(bM,bH),bO=C.InsertBeforeDelim(bM,bK.docNode),bP=function(bT){m.set(br,bT,bK.docNode);},function(bT){if(bT==null);else bP(bT.$0);}((bQ=function(bT){return bH===bT;},function(bT){return m.tryFindIndex(bQ,bT);}(br))),bR=bA.push(N.New(L.Empty(bL),bK.docNode,{$:1,$0:[bO,bM]},bL,q.Int(),null)),bS=bB.push(bK.updates)):void 0;});z.IterSelector(bp,"[ws-attr]",function(bH){var bI,bJ,bK;bI=bH.getAttribute("ws-attr");bH.removeAttribute("ws-attr");bJ=(bK=null,[bE.TryGetValue(bI,{get:function(){return bK;},set:function(bL){bK=bL;}}),bK]);bJ[0]?bJ[1].$==3?bs(bH,bJ[1].$1):a.console.warn.apply(a.console,["Attribute hole filled with non-attribute data"].concat([bI])):void 0;});z.IterSelector(bp,"[ws-on]",function(bH){var bI,bJ;bs(bH,P.Concat((bI=function(bK){var bL,bM,bN,bO,bP,bQ;bL=R.SplitChars(bK,[58],1);bM=(bN=null,[bE.TryGetValue(m.get(bL,1),{get:function(){return bN;},set:function(bR){bN=bR;}}),bN]);return bM[0]?bM[1].$==4?(bO=bM[1].$1,{$:1,$0:O.Handler(m.get(bL,0),bO)}):(bP="Event hole on"+m.get(bL,0)+" filled with non-event data",bQ=[m.get(bL,1)],a.console.warn.apply(a.console,[bP].concat(bQ)),null):null;},function(bK){return m.choose(bI,bK);}((bJ=bH.getAttribute("ws-on"),R.SplitChars(bJ,[32],1))))));bH.removeAttribute("ws-on");});z.IterSelector(bp,"[ws-onafterrender]",function(bH){var bI,bJ,bK,bL;bI=bH.getAttribute("ws-onafterrender");bJ=(bK=null,[bE.TryGetValue(bI,{get:function(){return bK;},set:function(bM){bK=bM;}}),bK]);bJ[0]?bJ[1].$==5?(bL=bJ[1].$1,bH.removeAttribute("ws-onafterrender"),bs(bH,O.OnAfterRender(bL))):a.console.warn.apply(a.console,["onafterrender hole filled with non-onafterrender data"].concat([bI])):void 0;});z.IterSelector(bp,"[ws-var]",function(bH){var bI,bJ,bK,bL,bM,bN,bO,bP,bQ;bI=bH.getAttribute("ws-var");bH.removeAttribute("ws-var");bJ=(bK=null,[bE.TryGetValue(bI,{get:function(){return bK;},set:function(bR){bK=bR;}}),bK]);bJ[0]?bJ[1].$==6?(bL=bJ[1].$1,bs(bH,O.Value(bL))):bJ[1].$==7?(bM=bJ[1].$1,bs(bH,O.Checked(bM))):bJ[1].$==8?(bN=bJ[1].$1,bs(bH,O.IntValue(bN))):bJ[1].$==9?(bO=bJ[1].$1,bs(bH,O.IntValueUnchecked(bO))):bJ[1].$==10?(bP=bJ[1].$1,bs(bH,O.FloatValue(bP))):bJ[1].$==11?(bQ=bJ[1].$1,bs(bH,O.FloatValueUnchecked(bQ))):a.console.warn.apply(a.console,["Var hole filled with non-Var data"].concat([bI])):void 0;});z.IterSelector(bp,"[ws-attr-holes]",function(bH){var bI,bJ,bK,bL,bM,bN;bK=(bI=C.TextHoleRE(),new a.RegExp(bI,"g"));bL=(bJ=bH.getAttribute("ws-attr-holes"),R.SplitChars(bJ,[32],1));bH.removeAttribute("ws-attr-holes");for(bM=0,bN=bL.length-1;bM<=bN;bM++)(function(){var bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca;b8=m.get(bL,bM);b9=bH.getAttribute(b8);bO=null;bP=0;b_=[];while(bO=bK.exec(b9),bO!==null){b$=Q.string(b9,{$:1,$0:bP},{$:1,$0:bK.lastIndex-m.get(bO,0).length-1});bP=bK.lastIndex;ca=b_.push([b$,m.get(bO,1)]);}bR=Q.string(b9,{$:1,$0:bP},null);bK.lastIndex=0;bS=m.foldBack(function(cb,cc){return(function(cd){var ce,cf;ce=cd[0];cf=cd[1];return function(cg){var ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx;ch=cg[0];ci=cg[1];cj=(ck=(cl=null,[bE.TryGetValue(cf,{get:function(){return cl;},set:function(cy){cl=cy;}}),cl]),ck[0]?ck[1].$==1?{$:0,$0:ck[1].$1}:ck[1].$==2?{$:1,$0:ck[1].$1}:ck[1].$==6?{$:1,$0:ck[1].$1.RView()}:ck[1].$==7?(cm=ck[1].$1,{$:1,$0:(cn=cm.RView(),B.Map(a.String,cn))}):ck[1].$==8?(co=ck[1].$1,{$:1,$0:(cp=co.RView(),B.Map(function(cy){return cy.get_Input();},cp))}):ck[1].$==9?(cq=ck[1].$1,{$:1,$0:(cr=cq.RView(),B.Map(a.String,cr))}):ck[1].$==10?(cs=ck[1].$1,{$:1,$0:(ct=cs.RView(),B.Map(function(cy){return cy.get_Input();},ct))}):ck[1].$==11?(cu=ck[1].$1,{$:1,$0:(cv=cu.RView(),B.Map(a.String,cv))}):(a.console.warn.apply(a.console,["Attribute value hole filled with non-text data"].concat([cf])),{$:0,$0:""}):{$:0,$0:""});return cj.$==1?(cw=cj.$0,cx=ch===""?cw:B.Map(function(cy){return cy+ch;},cw),[ce,new k({$:1,$0:cx,$1:ci})]):[ce+cj.$0+ch,ci];};}(cb))(cc);},b_,[bR,k.Empty]);return bs(bH,bS[1].$==1?bS[1].$1.$==1?bS[1].$1.$1.$==1?bS[1].$1.$1.$1.$==0?(bT=bS[0],bU=bS[1].$0,bV=bS[1].$1.$0,bW=bS[1].$1.$1.$0,O.Dynamic(b8,B.Map3(function(cb,cc,cd){return bT+cb+cc+cd;},bU,bV,bW))):(bX=bS[0],bY=bS[1],bZ=(b0=function(cb){return bX+R.concat("",cb);},function(cb){return B.Map(b0,cb);}(B.Sequence(bY))),O.Dynamic(b8,bZ)):(b1=bS[0],b2=bS[1].$0,b3=bS[1].$1.$0,O.Dynamic(b8,B.Map2(function(cb,cc){return b1+cb+cc;},b2,b3))):bS[0]===""?(b4=bS[1].$0,O.Dynamic(b8,b4)):(b5=bS[0],b6=bS[1].$0,O.Dynamic(b8,B.Map(function(cb){return b5+cb;},b6))):(b7=bS[0],P.Create(b8,b7)));}());});bu=(bv=bD.length==0?null:{$:1,$0:function(bH){m.iter(function(bI){bI(bH);},bD);}},bo.DeleteEmptyFields({Els:br,Dirty:true,Holes:bA,Attrs:bC,Render:bv?bv.$0:void 0},["Render"]));bw=(bx=B.Const(),function(bH){return S.TreeReduce(bx,B.Map2Unit,bH);}(bB));return((br?m.length(br)===1:false)?m.get(br,0)instanceof a.Node?(bz=m.get(br,0),y.Equals(bz.nodeType,a.Node.ELEMENT_NODE))?(by=m.get(br,0),true):false:false:false)?T.TreeNode(bu,bw):u.Mk({$:6,$0:bu},bw);};u.Empty=function(){var bp,bq;bp=G.EmptyDoc;bq=B.Const();return u.Mk(bp,bq);};u.Concat=function(bp){var bq,br;bq=S.ofSeqNonCopying(bp);br=u.Empty();return S.TreeReduce(br,u.Append,bq);};u.EmbedView=function(bp){var bq,br,bs,bt;bq=C.CreateEmbedNode();br={$:2,$0:bq};return function(bu){return u.Mk(br,bu);}((bs=function(){},function(bu){return B.Map(bs,bu);}((bt=function(bu){C.UpdateEmbedNode(bq,bu.docNode);return bu.updates;},function(bu){return B.Bind(bt,bu);}(bp)))));};u.PrepareTemplateStrict=function(bp,bq,br){var bs,bt,bu,bv,bw,bx,by,bz;function bA(bF,bG,bH){var bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8;while(true)switch(bF){case 0:bP=Q.string(bG.nodeName,{$:1,$0:3},null).toLowerCase();bQ=(bI=bP.indexOf(a.String.fromCharCode(46)),bI===-1?bp+"/"+bP:R.Replace(bP,".","/"));if(!C.LoadedTemplates().ContainsKey(bQ))return a.console.warn.apply(a.console,["Instantiating non-loaded template"].concat([bQ]));else{bR=C.LoadedTemplates().get_Item(bQ);bS=bR.cloneNode(true);bT=new _1.New$3();bU=new x.New$5();bV=bG.attributes;for(bW=0,bX=bV.length-1;bW<=bX;bW++){bY=bV.item(bW).name.toLowerCase();bZ=(b0=bV.item(bW).nodeValue,b0===""?bY:b0.toLowerCase());bU.set_Item(bY,bZ);!bT.Add(bY)?a.console.warn.apply(a.console,["Hole mapped twice"].concat([bY])):void 0;}for(b1=0,b2=bG.childNodes.length-1;b1<=b2;b1++){b3=bG.childNodes[b1];y.Equals(b3.nodeType,a.Node.ELEMENT_NODE)?!bT.Add(b3.nodeName.toLowerCase())?a.console.warn.apply(a.console,["Hole filled twice"].concat([bQ])):void 0:void 0;}b4=bG.childNodes.length===1?y.Equals(bG.firstChild.nodeType,a.Node.TEXT_NODE):false;if(b4){bK=bx(bS,bG.firstChild.textContent);bL=(bM=function(b9){return function(b_){return b9.Add(b_);};}(bT),bN=function(){},function(b9){return bN(bM(b9));});((function(b9){return function(b_){if(b_==null);else b9(b_.$0);};}(bL))(bK));}bw(bS,bT);if(!b4){for(b5=0,b6=bG.childNodes.length-1;b5<=b6;b5++){b7=bG.childNodes[b5];y.Equals(b7.nodeType,a.Node.ELEMENT_NODE)?b7.hasAttributes()?bv(bS,b7):bB(bS,b7):void 0;}}bu(bS,bU);(((function(b9){var b_;b_=function(b$,ca){return by(b9,b$,ca);};return function(b$){return function(ca){return b_(b$,ca);};};}(bS))(bG.parentNode))(bG));return bO=bG.parentNode.removeChild(bG);}case 1:if(bH!==null){b8=bH.nextSibling;if(y.Equals(bH.nodeType,a.Node.TEXT_NODE))bt(bH);else if(y.Equals(bH.nodeType,a.Node.ELEMENT_NODE))bD(bH);bF=1;bG=bG;bH=b8;}else return null;}}function bB(bF,bG){var bH,bI,bK,bL,bM;function bJ(bN,bO){var bP,bQ,bR,bS,bT,bU;if(bK==="title"?bG.hasChildNodes():false){bR=(bP=bG.textContent,a.jQuery.parseHTML(bP));bQ=bG.removeChild(bG.firstChild);for(bS=0,bT=bR.length-1;bS<=bT;bS++){bU=bG.appendChild(m.get(bR,bS));}}else null;bD(bG);return by(bG,bN,bO);}bK=bG.nodeName.toLowerCase();z.IterSelector(bF,"[ws-attr-holes]",function(bN){var bO,bP,bQ,bR,bS,bT,bU,bV;bP=(bO=bN.getAttribute("ws-attr-holes"),R.SplitChars(bO,[32],1));for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++){bS=m.get(bP,bQ);bN.setAttribute(bS,(bT=new a.RegExp("\\${"+bK+"}","ig"),bU=bN.getAttribute(bS),bV=bG.textContent,bT[a.Symbol.replace](bU,bV)));}});bL=bF.querySelector("[ws-hole="+bK+"]");if(y.Equals(bL,null)){bH=bF.querySelector("[ws-replace="+bK+"]");return y.Equals(bH,null)?null:(bJ(bH.parentNode,bH),bI=bH.parentNode.removeChild(bH));}else{while(bL.hasChildNodes()){bM=bL.removeChild(bL.lastChild);}bL.removeAttribute("ws-hole");return bJ(bL,null);}}function bC(bF){return bA(0,bF);}function bD(bF){var bG,bH,bI,bJ;if((bG=bF.nodeName.toLowerCase(),R.StartsWith(bG,"ws-"))?!bF.hasAttribute("ws-template"):false)bC(bF);else{bs(bF);bH=bF.getAttribute("ws-template");if(bH===null){bI=bF.getAttribute("ws-children-template");if(bI===null)bE(bF,bF.firstChild);else{bF.removeAttribute("ws-children-template");u.PrepareTemplate(bp,{$:1,$0:bI},function(){return z.ChildrenArray(bF);});while(bF.hasChildNodes()){bJ=bF.removeChild(bF.lastChild);}}}else u.PrepareSingleTemplate(bp,{$:1,$0:bH},bF);}}function bE(bF,bG){return bA(1,bF,bG);}bs=function(bF){var bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW;function bG(bX){var bY;bY=bF.getAttribute(bX);bY===null?void 0:bF.setAttribute(bX,bY.toLowerCase());}bH=bF.attributes;bI=[];bJ=[];bK=[];for(bL=0,bM=bH.length-1;bL<=bM;bL++){bN=bH.item(bL);(((bO=bN.nodeName,R.StartsWith(bO,"ws-on"))?bN.nodeName!=="ws-onafterrender":false)?bN.nodeName!=="ws-on":false)?(bP=bI.push(bN.nodeName),bQ=bJ.push(Q.string(bN.nodeName,{$:1,$0:"ws-on".length},null)+":"+bN.nodeValue.toLowerCase())):(!(bR=bN.nodeName,R.StartsWith(bR,"ws-"))?(bS=C.TextHoleRE(),new a.RegExp(bS)).test(bN.nodeValue):false)?(bN.nodeValue=(bT=(bU=C.TextHoleRE(),new a.RegExp(bU,"g")),(bV=bN.nodeValue,bT[a.Symbol.replace](bV,function(bX,bY){return"${"+bY.toLowerCase()+"}";}))),bW=bK.push(bN.nodeName)):void 0;}!(bJ.length==0)?bF.setAttribute("ws-on",R.concat(" ",bJ)):void 0;!(bK.length==0)?bF.setAttribute("ws-attr-holes",R.concat(" ",bK)):void 0;bG("ws-hole");bG("ws-replace");bG("ws-attr");bG("ws-onafterrender");bG("ws-var");m.iter(function(bX){bF.removeAttribute(bX);},bI);};bt=function(bF){var bG,bH,bI,bJ,bK,bL,bM,bN,bO;bG=null;bH=0;bK=bF.textContent;bL=(bJ=C.TextHoleRE(),new a.RegExp(bJ,"g"));while(bG=bL.exec(bK),bG!==null){bM=bF.parentNode.insertBefore(a.document.createTextNode(Q.string(bK,{$:1,$0:bH},{$:1,$0:bL.lastIndex-m.get(bG,0).length-1})),bF);bH=bL.lastIndex;bN=a.document.createElement("span");bN.setAttribute("ws-replace",m.get(bG,1).toLowerCase());bO=bF.parentNode.insertBefore(bN,bF);}bL.lastIndex=0;bF.textContent=Q.string(bK,{$:1,$0:bH},null);};bu=function(bF,bG){function bH(bI){z.IterSelector(bF,"["+bI+"]",function(bJ){var bK,bL;bK=(bL=null,[bG.TryGetValue(bJ.getAttribute(bI).toLowerCase(),{get:function(){return bL;},set:function(bM){bL=bM;}}),bL]);bK[0]?bJ.setAttribute(bI,bK[1]):void 0;});}bH("ws-hole");bH("ws-replace");bH("ws-attr");bH("ws-onafterrender");bH("ws-var");z.IterSelector(bF,"[ws-on]",function(bI){var bJ,bK,bL;bI.setAttribute("ws-on",(bJ=(bK=function(bM){var bN,bO,bP,bQ;bN=R.SplitChars(bM,[58],1);bO=(bP=null,[bG.TryGetValue(m.get(bN,1),{get:function(){return bP;},set:function(bR){bP=bR;}}),bP]);return bO[0]?(bQ=bO[1],m.get(bN,0)+":"+bQ):bM;},function(bM){return m.map(bK,bM);}((bL=bI.getAttribute("ws-on"),R.SplitChars(bL,[32],1)))),R.concat(" ",bJ)));});return z.IterSelector(bF,"[ws-attr-holes]",function(bI){var bJ,bK,bL,bM;bK=(bJ=bI.getAttribute("ws-attr-holes"),R.SplitChars(bJ,[32],1));for(bL=0,bM=bK.length-1;bL<=bM;bL++)(function(){var bN,bO,bP;bN=m.get(bK,bL);return bI.setAttribute(bN,(bO=bI.getAttribute(bN),((bP=function(bQ,bR){var bS,bT,bU,bV;bS=h.KeyValue(bR);bT=bS[1];bU=bS[0];bV=new a.RegExp("\\${"+bU+"}","ig");return bV[a.Symbol.replace](bQ,"${"+bT+"}");},(bo.Curried3(E.fold))(bP))(bO))(bG)));}());});};bv=function(bF,bG){var bH,bI,bJ,bK,bL;bs(bG);bH=bG.nodeName.toLowerCase();bI=bF.querySelector("[ws-attr="+bH+"]");if(y.Equals(bI,null))return a.console.warn.apply(a.console,["Filling non-existent attr hole"].concat([bH]));else{bI.removeAttribute("ws-attr");for(bJ=0,bK=bG.attributes.length-1;bJ<=bK;bJ++){bL=bG.attributes.item(bJ);(bL.name==="class"?bI.hasAttribute("class"):false)?bI.setAttribute("class",bI.getAttribute("class")+" "+bL.nodeValue):bI.setAttribute(bL.name,bL.nodeValue);}return;}};bw=function(bF,bG){function bH(bI){z.IterSelector(bF,"["+bI+"]",function(bJ){if(!bG.Contains(bJ.getAttribute(bI)))bJ.removeAttribute(bI);});}bH("ws-attr");bH("ws-onafterrender");bH("ws-var");z.IterSelector(bF,"[ws-hole]",function(bI){var bJ;if(!bG.Contains(bI.getAttribute("ws-hole"))){bI.removeAttribute("ws-hole");while(bI.hasChildNodes()){bJ=bI.removeChild(bI.lastChild);}}});z.IterSelector(bF,"[ws-replace]",function(bI){var bJ;if(!bG.Contains(bI.getAttribute("ws-replace"))){bJ=bI.parentNode.removeChild(bI);}});z.IterSelector(bF,"[ws-on]",function(bI){var bJ,bK,bL;bI.setAttribute("ws-on",(bJ=(bK=function(bM){var bN;bN=R.SplitChars(bM,[58],1);return bG.Contains(m.get(bN,1));},function(bM){return m.filter(bK,bM);}((bL=bI.getAttribute("ws-on"),R.SplitChars(bL,[32],1)))),R.concat(" ",bJ)));});return z.IterSelector(bF,"[ws-attr-holes]",function(bI){var bJ,bK,bL,bM,bN,bO,bP,bQ;bK=(bJ=bI.getAttribute("ws-attr-holes"),R.SplitChars(bJ,[32],1));for(bL=0,bM=bK.length-1;bL<=bM;bL++){bN=m.get(bK,bL);bI.setAttribute(bN,(bO=(bP=C.TextHoleRE(),new a.RegExp(bP,"g")),(bQ=bI.getAttribute(bN),bO[a.Symbol.replace](bQ,function(bR,bS){return bG.Contains(bS)?bR:"";}))));}});};bx=function(bF,bG){var bH,bI;bH=bF.querySelector("[ws-replace]");return y.Equals(bH,null)?(a.console.warn.apply(a.console,["Filling non-existent text hole"].concat([bq])),null):(bI=bH.parentNode.replaceChild(new a.Text(bG),bH),{$:1,$0:bH.getAttribute("ws-replace")});};by=function(bF,bG,bH){while(true)if(bF.hasChildNodes())bH=bG.insertBefore(bF.lastChild,bH);else return null;};bz=u.FakeRoot(br);C.LoadedTemplates().set_Item(u.ComposeName(bp,bq),bz);m.length(br)>0?bE(bz,m.get(br,0)):void 0;};u.TextNode=function(bp){var bq,br;bq={$:5,$0:z.CreateText(bp)};br=B.Const();return u.Mk(bq,br);};u.TextView=function(bp){var bq,br,bs;bq=C.CreateTextNode();br={$:4,$0:bq};return function(bt){return u.Mk(br,bt);}((bs=function(bt){C.UpdateTextNode(bq,bt);},function(bt){return B.Map(bs,bt);}(bp)));};u.Mk=function(bp,bq){return new u.New(bp,bq);};u.Append=function(bp,bq){var br,bs,bt,bu;br=(bs=bp.updates,(bt=bq.updates,B.Map2Unit(bs,bt)));bu={$:0,$0:bp.docNode,$1:bq.docNode};return u.Mk(bu,br);};u.FakeRoot=function(bp){var bq,br,bs,bt;bq=a.document.createElement("div");for(br=0,bs=bp.length-1;br<=bs;br++){bt=bq.appendChild(m.get(bp,br));}return bq;};u.New=bo.Ctor(function(bp,bq){this.docNode=bp;this.updates=bq;},u);v.TryParse=function(bp,bq){return $.TryParse(bp,-2147483648,2147483647,bq);};x=w.Dictionary=bo.Class({TryGetValue:function(bp,bq){var br,bs,bt,bu,bv;br=this;bs=this.hash(bp);bt=this.data[bs];return bt?(bu=(bv=function(bw){var bx,by;bx=h.KeyValue(bw);by=bx[1];return br.equals.apply(null,[bx[0],bp])?{$:1,$0:by}:null;},function(bw){return m.tryPick(bv,bw);}(bt)),(bu!=null?bu.$==1:false)?(bq.set(bu.$0),true):false):false;},Remove:function(bp){return this.remove(bp);},ContainsKey:function(bp){var bq,br,bs,bt;bq=this;br=this.hash(bp);bs=this.data[br];return bs?(bt=function(bu){return bq.equals.apply(null,[(h.KeyValue(bu))[0],bp]);},function(bu){return m.exists(bt,bu);}(bs)):false;},set_Item:function(bp,bq){this.set(bp,bq);},remove:function(bp){var bq,br,bs,bt,bu;bq=this;br=this.hash(bp);bs=this.data[br];return bs?(bt=(bu=function(bv){return!bq.equals.apply(null,[(h.KeyValue(bv))[0],bp]);},function(bv){return m.filter(bu,bv);}(bs)),m.length(bt)<bs.length?(this.count=this.count-1,this.data[br]=bt,true):false):false;},get_Item:function(bp){return this.get(bp);},set:function(bp,bq){var br,bs,bt,bu,bv,bw;br=this;bs=this.hash(bp);bt=this.data[bs];bt?(bu=(bv=function(bx){return br.equals.apply(null,[(h.KeyValue(bx))[0],bp]);},function(bx){return m.tryFindIndex(bv,bx);}(bt)),bu==null?(this.count=this.count+1,bw=bt.push({K:bp,V:bq})):bt[bu.$0]={K:bp,V:bq}):(this.count=this.count+1,this.data[bs]=new a.Array({K:bp,V:bq}));},get:function(bp){var bq,br,bs,bt;bq=this;br=this.hash(bp);bs=this.data[br];return bs?(bt=function(bu){var bv,bw;bv=h.KeyValue(bu);bw=bv[1];return bq.equals.apply(null,[bv[0],bp])?{$:1,$0:bw}:null;},function(bu){return m.pick(bt,bu);}(bs)):_2.notPresent();},GetEnumerator:function(){return U.Get0(this);},GetEnumerator0:function(){var bp;bp=D.GetFieldValues(this.data);return U.Get0(m.concat(bp));}},null,x);x.New$5=bo.Ctor(function(){x.New$6.call(this,[],y.Equals,y.Hash);},x);x.New$6=bo.Ctor(function(bp,bq,br){var bs,bt;this.equals=bq;this.hash=br;this.count=0;this.data=[];bs=U.Get(bp);try{while(bs.MoveNext()){bt=bs.Current();this.set(bt.K,bt.V);}}finally{if("Dispose"in bs)bs.Dispose();}},x);l.FromSeq=function(bp){return l.Create(a.id,bp);};l.Create=function(bp,bq){var br;br=J.InMemory(m.ofSeq(bq));return l.CreateWithStorage(bp,br);};l.CreateWithStorage=function(bp,bq){return new l.New(bp,bq);};m.tryFindIndex=function(bp,bq){var br,bs;br=null;bs=0;while(bs<bq.length?br==null:false){bp(bq[bs])?br={$:1,$0:bs}:void 0;bs=bs+1;}return br;};m.tryPick=function(bp,bq){var br,bs,bt;br=null;bs=0;while(bs<bq.length?br==null:false){bt=bp(bq[bs]);(bt!=null?bt.$==1:false)?br=bt:void 0;bs=bs+1;}return br;};m.choose=function(bp,bq){var br,bs,bt,bu;br=[];for(bs=0,bt=bq.length-1;bs<=bt;bs++){bu=bp(bq[bs]);bu==null?void 0:br.push(bu.$0);}return br;};m.foldBack=function(bp,bq,br){var bs,bt,bu,bv,bw;bs=br;bu=bq.length;for(bv=1,bw=bu;bv<=bw;bv++)bs=bp(bq[bu-bv],bs);return bs;};m.iter=function(bp,bq){var br,bs;for(br=0,bs=bq.length-1;br<=bs;br++)bp(bq[br]);};m.ofSeq=function(bp){var bq,br;if(bp instanceof a.Array)return bp.slice();else if(bp instanceof k)return m.ofList(bp);else{bq=[];br=U.Get(bp);try{while(br.MoveNext())bq.push(br.Current());return bq;}finally{if("Dispose"in br)br.Dispose();}}};m.exists=function(bp,bq){var br,bs,bt,bu;br=false;bs=0;bu=m.length(bq);while(!br?bs<bu:false)if(bp(bq[bs]))br=true;else bs=bs+1;return br;};m.map=function(bp,bq){var br,bs,bt,bu;bs=(br=bq.length,new a.Array(br));for(bt=0,bu=bq.length-1;bt<=bu;bt++)bs[bt]=bp(bq[bt]);return bs;};m.filter=function(bp,bq){var br,bs,bt;br=[];for(bs=0,bt=bq.length-1;bs<=bt;bs++)if(bp(bq[bs]))br.push(bq[bs]);return br;};m.ofList=function(bp){var bq,br;br=[];bq=bp;while(!(bq.$==0)){br.push(j.head(bq));bq=j.tail(bq);}return br;};m.forall=function(bp,bq){var br,bs,bt,bu;br=true;bs=0;bu=m.length(bq);while(br?bs<bu:false)if(bp(bq[bs]))bs=bs+1;else br=false;return br;};m.concat=function(bp){var bq;bq=m.ofSeq(bp);return a.Array.prototype.concat.apply([],bq);};m.pick=function(bp,bq){var br;br=m.tryPick(bp,bq);return br==null?h.FailWith("KeyNotFoundException"):br.$0;};m.create=function(bp,bq){var br,bs,bt;br=new a.Array(bp);for(bs=0,bt=bp-1;bs<=bt;bs++)br[bs]=bq;return br;};m.init=function(bp,bq){var br,bs,bt;bp<0?h.FailWith("Negative size given."):null;br=new a.Array(bp);for(bs=0,bt=bp-1;bs<=bt;bs++)br[bs]=bq(bs);return br;};y.Equals=function(bp,bq){var br,bs,bt,bu;if(bp===bq)return true;else{br=typeof bp;if(br=="object"){if(((bp===null?true:bp===void 0)?true:bq===null)?true:bq===void 0)return false;else if("Equals"in bp)return bp.Equals(bq);else if(bp instanceof a.Array?bq instanceof a.Array:false)return y.arrayEquals(bp,bq);else if(bp instanceof a.Date?bq instanceof a.Date:false)return y.dateEquals(bp,bq);else{bs=[true];for(var bv in bp)if(function(bw){bs[0]=!bp.hasOwnProperty(bw)?true:bq.hasOwnProperty(bw)?y.Equals(bp[bw],bq[bw]):false;return!bs[0];}(bv))break;if(bs[0]){for(var bw in bq)if(function(bx){bs[0]=!bq.hasOwnProperty(bx)?true:bp.hasOwnProperty(bx);return!bs[0];}(bw))break;}return bs[0];}}else return br=="function"?"$Func"in bp?bp.$Func===bq.$Func?bp.$Target===bq.$Target:false:("$Invokes"in bp?"$Invokes"in bq:false)?y.arrayEquals(bp.$Invokes,bq.$Invokes):false:false;}};y.arrayEquals=function(bp,bq){var br,bs;if(m.length(bp)===m.length(bq)){br=true;bs=0;while(br?bs<m.length(bp):false){!y.Equals(m.get(bp,bs),m.get(bq,bs))?br=false:void 0;bs=bs+1;}return br;}else return false;};y.dateEquals=function(bp,bq){return bp.getTime()===bq.getTime();};y.Hash=function(bp){var bq;bq=typeof bp;return bq=="function"?0:bq=="boolean"?bp?1:0:bq=="number"?bp:bq=="string"?y.hashString(bp):bq=="object"?bp==null?0:bp instanceof a.Array?y.hashArray(bp):y.hashObject(bp):0;};y.hashString=function(bp){var bq,br,bs;if(bp===null)return 0;else{bq=5381;for(br=0,bs=bp.length-1;br<=bs;br++)bq=y.hashMix(bq,bp.charCodeAt(br)<<0);return bq;}};y.hashArray=function(bp){var bq,br,bs;bq=-34948909;for(br=0,bs=m.length(bp)-1;br<=bs;br++)bq=y.hashMix(bq,y.Hash(m.get(bp,br)));return bq;};y.hashObject=function(bp){var bq,br,bs;if("GetHashCode"in bp)return bp.GetHashCode();else{bq=y.hashMix;br=[0];for(var bt in bp)if(function(bu){br[0]=bq(bq(br[0],y.hashString(bu)),y.Hash(bp[bu]));return false;}(bt))break;return br[0];}};y.hashMix=function(bp,bq){return(bp<<5)+bp+bq;};y.Compare=function(bp,bq){var br,bs,bt,bu,bv,bw;if(bp===bq)return 0;else{bs=typeof bp;switch(bs=="function"?1:bs=="boolean"?2:bs=="number"?2:bs=="string"?2:bs=="object"?3:0){case 0:return typeof bq=="undefined"?0:-1;break;case 1:return h.FailWith("Cannot compare function values.");break;case 2:return bp<bq?-1:1;break;case 3:if(bp===null)bt=-1;else if(bq===null)bt=1;else if("CompareTo"in bp)bt=bp.CompareTo(bq);else if("CompareTo0"in bp)bt=bp.CompareTo0(bq);else if(bp instanceof a.Array?bq instanceof a.Array:false)bt=y.compareArrays(bp,bq);else if(bp instanceof a.Date?bq instanceof a.Date:false)bt=y.compareDates(bp,bq);else{bu=[0];for(var bx in bp)if(function(by){return!bp.hasOwnProperty(by)?false:!bq.hasOwnProperty(by)?(bu[0]=1,true):(bu[0]=y.Compare(bp[by],bq[by]),bu[0]!==0);}(bx))break;if(bu[0]===0){for(var by in bq)if(function(bz){return!bq.hasOwnProperty(bz)?false:!bp.hasOwnProperty(bz)?(bu[0]=-1,true):false;}(by))break;}bt=bu[0];}return bt;break;}}};y.compareArrays=function(bp,bq){var br,bs;if(m.length(bp)<m.length(bq))return -1;else if(m.length(bp)>m.length(bq))return 1;else{br=0;bs=0;while(br===0?bs<m.length(bp):false){br=y.Compare(m.get(bp,bs),m.get(bq,bs));bs=bs+1;}return br;}};y.compareDates=function(bp,bq){return h.Compare(bp.getTime(),bq.getTime());};z.Doc=function(){H.$cctor();return H.Doc;};z.ChildrenArray=function(bp){var bq,br,bs,bt;bq=[];for(br=0,bs=bp.childNodes.length-1;br<=bs;br++){bt=bq.push(bp.childNodes[br]);}return bq;};z.IterSelector=function(bp,bq,br){var bs,bt,bu;bs=bp.querySelectorAll(bq);for(bt=0,bu=bs.length-1;bt<=bu;bt++)br(bs[bt]);};z.CreateText=function(bp){return z.Doc().createTextNode(bp);};z.SetAttr=function(bp,bq,br){bp.setAttribute(bq,br);};z.InsertAt=function(bp,bq,br){var bs,bt;!(br.parentNode===bp?bq===(bs=br.nextSibling,y.Equals(bs,null)?null:bs):false)?bt=bp.insertBefore(br,bq):void 0;};z.RemoveNode=function(bp,bq){var br;if(bq.parentNode===bp){br=bp.removeChild(bq);}};A.$cctor=bo.Cctor(function(){A.counter=0;A.$cctor=a.ignore;});B.MapSeqCached=function(bp,bq){return B.MapSeqCachedBy(a.id,bp,bq);};B.Sink=function(bp,bq){function br(){var bs;bs=bq();o.When(bs,bp,function(){Z.Schedule(br);});}Z.Schedule(br);};B.MapSeqCachedBy=function(bp,bq,br){var bs,bt;bs=[new x.New$5()];bt=function(bu){var bv,bw,bx,by;bv=bs[0];bw=new x.New$5();bx=(by=function(bz){var bA,bB;bA=bp(bz);bB=bv.ContainsKey(bA)?bv.get_Item(bA):bq(bz);bw.set_Item(bA,bB);return bB;},function(bz){return S.mapInPlace(by,bz);}(m.ofSeq(bu)));bs[0]=bw;return bx;};return function(bu){return B.Map(bt,bu);}(br);};B.Map=function(bp,bq){return B.CreateLazy(function(){var br;br=bq();return o.Map(bp,br);});};B.Map3=function(bp,bq,br,bs){return B.CreateLazy(function(){var bt,bu,bv;bt=bq();bu=br();bv=bs();return o.Map3(bp,bt,bu,bv);});};B.Sequence=function(bp){return B.CreateLazy(function(){var bq;return o.Sequence((bq=function(br){return br();},function(br){return E.map(bq,br);}(bp)));});};B.Map2=function(bp,bq,br){return B.CreateLazy(function(){var bs,bt;bs=bq();bt=br();return o.Map2(bp,bs,bt);});};B.Const=function(bp){var bq;bq=o.CreateForever(bp);return function(){return bq;};};B.Map2Unit=function(bp,bq){return B.CreateLazy(function(){var br,bs;br=bp();bs=bq();return o.Map2Unit(br,bs);});};B.CreateLazy=function(bp){var bq;bq={c:null,o:bp};return function(){var br;br=bq.c;return br===null?(br=bq.o(),bq.c=br,o.IsForever(br)?bq.o=null:o.WhenObsolete(br,function(){bq.c=null;}),br):br;};};B.Bind=function(bp,bq){return B.Join(B.Map(bp,bq));};B.Join=function(bp){return B.CreateLazy(function(){return o.Join(bp());});};C.LoadedTemplates=function(){K.$cctor();return K.LoadedTemplates;};C.LinkElement=function(bp,bq){var br;br=C.InsertDoc(bp,bq,null);};C.CreateRunState=function(bp,bq){return W.New(X.get_Empty(),C.CreateElemNode(bp,L.EmptyAttr(),bq));};C.PerformAnimatedUpdate=function(bp,bq){var br;return Y.get_UseAnimations()?_6.Delay(function(){var bs,bt,bu,bv,bw;bs=X.FindAll(bq);bt=C.ComputeChangeAnim(bp,bs);bu=C.ComputeEnterAnim(bp,bs);bv=C.ComputeExitAnim(bp,bs);bw=Y.Play(Y.Append(bt,bv));return _6.Bind(bw,function(){C.SyncElemNode(bp.Top);return _6.Bind(Y.Play(bu),function(){bp.PreviousNodes=bs;return _6.Return(null);});});}):(br=function(bs){var bt;bt=a.requestAnimationFrame(function(){C.SyncElemNode(bp.Top);bs();});},_6.FromContinuations(function(bs,bt,bu){return br.apply(null,[bs,bt,bu]);}));};C.InsertBeforeDelim=function(bp,bq){var br,bs,bt;br=bp.parentNode;bs=a.document.createTextNode("");bt=br.insertBefore(bs,bp);C.LinkPrevElement(bp,bq);return bs;};C.TextHoleRE=function(){K.$cctor();return K.TextHoleRE;};C.InsertDoc=function(bp,bq,br){var bs,bt,bu,bv,bw,bx,by;return bq.$==1?(bs=bq.$0,C.InsertNode(bp,bs.El,br)):bq.$==2?(bt=bq.$0,(bt.Dirty=false,C.InsertDoc(bp,bt.Current,br))):bq.$==3?br:bq.$==4?(bu=bq.$0,C.InsertNode(bp,bu.Text,br)):bq.$==5?(bv=bq.$0,C.InsertNode(bp,bv,br)):bq.$==6?(bw=bq.$0,m.foldBack(function(bz,bA){return bz.constructor===a.Object?C.InsertDoc(bp,bz,bA):C.InsertNode(bp,bz,bA);},bw.Els,br)):(bx=bq.$1,(by=bq.$0,C.InsertDoc(bp,by,C.InsertDoc(bp,bx,br))));};C.CreateElemNode=function(bp,bq,br){var bs;C.LinkElement(bp,br);bs=L.Insert(bp,bq);return N.New(bs,br,null,bp,q.Int(),bo.GetOptional(bs.OnAfterRender));};C.ComputeChangeAnim=function(bp,bq){var br,bs,bt,bu,bv;br=(bs=function(bw){return L.HasChangeAnim(bw.Attr);},function(bw){return X.Filter(bs,bw);});return Y.Concat((bt=function(bw){return L.GetChangeAnim(bw.Attr);},function(bw){return m.map(bt,bw);}(X.ToArray((bu=br(bp.PreviousNodes),(bv=br(bq),X.Intersect(bu,bv)))))));};C.ComputeEnterAnim=function(bp,bq){var br,bs,bt,bu;return Y.Concat((br=function(bv){return L.GetEnterAnim(bv.Attr);},function(bv){return m.map(br,bv);}(X.ToArray((bs=(bt=function(bv){return L.HasEnterAnim(bv.Attr);},function(bv){return X.Filter(bt,bv);}(bq)),(bu=bp.PreviousNodes,X.Except(bu,bs)))))));};C.ComputeExitAnim=function(bp,bq){var br,bs,bt;return Y.Concat((br=function(bu){return L.GetExitAnim(bu.Attr);},function(bu){return m.map(br,bu);}(X.ToArray((bs=(bt=function(bu){return L.HasExitAnim(bu.Attr);},function(bu){return X.Filter(bt,bu);}(bp.PreviousNodes)),X.Except(bq,bs))))));};C.SyncElemNode=function(bp){C.SyncElement(bp);C.Sync(bp.Children);C.AfterRender(bp);};C.CreateEmbedNode=function(){return{Current:G.EmptyDoc,Dirty:false};};C.UpdateEmbedNode=function(bp,bq){bp.Current=bq;bp.Dirty=true;};C.CreateTextNode=function(){return{Text:z.CreateText(""),Dirty:false,Value:""};};C.UpdateTextNode=function(bp,bq){bp.Value=bq;bp.Dirty=true;};C.LinkPrevElement=function(bp,bq){var br;br=C.InsertDoc(bp.parentNode,bq,bp);};C.InsertNode=function(bp,bq,br){z.InsertAt(bp,br,bq);return bq;};C.SyncElement=function(bp){function bq(br){function bs(bt){var bu,bv,bw;return bt.$==0?(bu=bt.$1,bs(bt.$0)?true:bs(bu)):bt.$==2?(bv=bt.$0,bv.Dirty?true:bs(bv.Current)):bt.$==6?(bw=bt.$0,bw.Dirty?true:m.exists(bq,bw.Holes)):false;}return bs(br.Children);}L.Sync(bp.El,bp.Attr);bq(bp)?C.DoSyncElement(bp):void 0;};C.Sync=function(bp){var bq,br,bs,bt,bu;if(bp.$==1)C.SyncElemNode(bp.$0);else if(bp.$==2){bq=bp.$0;C.Sync(bq.Current);}else if(bp.$==3);else if(bp.$==5);else if(bp.$==4){br=bp.$0;br.Dirty?(br.Text.nodeValue=br.Value,br.Dirty=false):void 0;}else if(bp.$==6){bs=bp.$0;m.iter(function(bv){C.SyncElemNode(bv);},bs.Holes);m.iter(function(bv){var bw,bx;bw=bv[0];bx=bv[1];L.Sync(bw,bx);},bs.Attrs);C.AfterRender(bs);}else{bt=bp.$1;bu=bp.$0;C.Sync(bu);C.Sync(bt);}};C.AfterRender=function(bp){var bq,br;bq=bo.GetOptional(bp.Render);(bq!=null?bq.$==1:false)?(br=bq.$0,br(bp.El),bo.SetOptional(bp,"Render",null)):void 0;};C.DoSyncElement=function(bp){var bq,br,bs,bt,bu,bv,bw,bx,by,bz;function bA(bB,bC){var bD,bE;return bB.$==1?bB.$0.El:bB.$==2?(bD=bB.$0,bD.Dirty?(bD.Dirty=false,C.InsertDoc(bq,bD.Current,bC)):bA(bD.Current,bC)):bB.$==3?bC:bB.$==4?bB.$0.Text:bB.$==5?bB.$0:bB.$==6?(bE=bB.$0,(bE.Dirty?bE.Dirty=false:void 0,m.foldBack(function(bF,bG){return bF.constructor===a.Object?bA(bF,bG):bF;},bE.Els,bC))):bA(bB.$0,bA(bB.$1,bC));}bq=bp.El;br=bh.DocChildren(bp);bs=(bt=(bu=bp.El,(bv=bo.GetOptional(bp.Delimiters),bh.Children(bu,bv))),bh.Except(br,bt));bw=(bx=bp.El,function(bB){z.RemoveNode(bx,bB);});bh.Iter(bw,bs);bz=bA(bp.Children,(by=bo.GetOptional(bp.Delimiters),(by!=null?by.$==1:false)?by.$0[1]:null));};D.GetFieldValues=function(bp){var bq,br;bq=[];for(var bs in bp)bq.push(bp[bs]);return bq;};E.iter=function(bp,bq){var br;br=U.Get(bq);try{while(br.MoveNext())bp(br.Current());}finally{if("Dispose"in br)br.Dispose();}};E.fold=function(bp,bq,br){var bs,bt;bs=bq;bt=U.Get(br);try{while(bt.MoveNext())bs=bp(bs,bt.Current());return bs;}finally{if("Dispose"in bt)bt.Dispose();}};E.map=function(bp,bq){return{GetEnumerator:function(){var br;br=U.Get(bq);return new _9.New(null,null,function(bs){return br.MoveNext()?(bs.c=bp(br.Current()),true):false;},function(){br.Dispose();});}};};E.distinctBy=function(bp,bq){return{GetEnumerator:function(){var br,bs;br=U.Get(bq);bs=new _1.New$3();return new _9.New(null,null,function(bt){var bu,bv;if(br.MoveNext()){bu=br.Current();bv=bs.Add(bp(bu));while(!bv?br.MoveNext():false){bu=br.Current();bv=bs.Add(bp(bu));}return bv?(bt.c=bu,true):false;}else return false;},function(){br.Dispose();});}};};E.forall=function(bp,bq){return!E.exists(function(br){return!bp(br);},bq);};E.max=function(bp){return E.reduce(function(bq,br){return y.Compare(bq,br)>=0?bq:br;},bp);};E.exists=function(bp,bq){var br,bs;br=U.Get(bq);try{bs=false;while(!bs?br.MoveNext():false)bs=bp(br.Current());return bs;}finally{if("Dispose"in br)br.Dispose();}};E.reduce=function(bp,bq){var br,bs;br=U.Get(bq);try{if(!br.MoveNext())h.FailWith("The input sequence was empty");bs=br.Current();while(br.MoveNext())bs=bp(bs,br.Current());return bs;}finally{if("Dispose"in br)br.Dispose();}};G.EmptyDoc={$:3};H.$cctor=bo.Cctor(function(){H.Doc=a.document;H.$cctor=a.ignore;});I.StartProcessor=function(bp){var bq;function br(){return _6.Delay(function(){return _6.Bind(bp,function(){var bs,bt;bs=bq[0];return y.Equals(bs,1)?(bq[0]=0,_6.Return(null)):y.Equals(bs,2)?(bq[0]=1,bt=br(),_6.Bind(bt,function(){return _6.Return(null);})):_6.Return(null);});});}bq=[0];return function(){var bs,bt;bs=bq[0];y.Equals(bs,0)?(bq[0]=1,bt=br(),_6.Start(bt,null)):y.Equals(bs,1)?bq[0]=2:void 0;};};J.InMemory=function(bp){return new _0.New(bp);};K.$cctor=bo.Cctor(function(){K.LoadedTemplates=new x.New$5();K.TextHoleRE="\\${([^}]+)}";K.$cctor=a.ignore;});L.Insert=function(bp,bq){var br,bs,bt;function bu(bv){var bw;if(!(bv===null))if(bv!=null?bv.$==1:false)br.push(bv.$0);else if(bv!=null?bv.$==2:false){bw=bv.$1;bu(bv.$0);bu(bw);}else if(bv!=null?bv.$==3:false)bv.$0(bp);else if(bv!=null?bv.$==4:false)bs.push(bv.$0);}br=[];bs=[];bu(bq);bt=br.slice(0);return _4.New(bp,L.Flags(bq),bt,bs.length===0?null:{$:1,$0:function(bv){E.iter(function(bw){bw(bv);},bs);}});};L.Updates=function(bp){var bq,br;bq=bp.DynNodes;br=B.Const();return S.MapTreeReduce(function(bs){return bs.NChanged();},br,B.Map2Unit,bq);};L.Empty=function(bp){return _4.New(bp,0,[],null);};L.Flags=function(bp){return(bp!==null?bp.hasOwnProperty("flags"):false)?bp.flags:0;};L.Static=function(bp){return new P({$:3,$0:bp});};L.Dynamic=function(bp,bq){return new P({$:1,$0:new ba.New(bp,bq)});};L.EmptyAttr=function(){bb.$cctor();return bb.EmptyAttr;};L.HasChangeAnim=function(bp){var bq;bq=4;return(bp.DynFlags&bq)===bq;};L.GetChangeAnim=function(bp){return L.GetAnim(bp,function(bq,br){return bq.NGetChangeAnim(br);});};L.HasEnterAnim=function(bp){var bq;bq=1;return(bp.DynFlags&bq)===bq;};L.GetEnterAnim=function(bp){return L.GetAnim(bp,function(bq,br){return bq.NGetEnterAnim(br);});};L.HasExitAnim=function(bp){var bq;bq=2;return(bp.DynFlags&bq)===bq;};L.GetExitAnim=function(bp){return L.GetAnim(bp,function(bq,br){return bq.NGetExitAnim(br);});};L.AppendTree=function(bp,bq){var br;return bp===null?bq:bq===null?bp:(br=new P({$:2,$0:bp,$1:bq}),(L.SetFlags(br,L.Flags(bp)|L.Flags(bq)),br));};L.GetAnim=function(bp,bq){var br;return Y.Concat((br=function(bs){return bq(bs,bp.DynElem);},function(bs){return m.map(br,bs);}(bp.DynNodes)));};L.Sync=function(bp,bq){var br;br=function(bs){bs.NSync(bp);};(function(bs){m.iter(br,bs);}(bq.DynNodes));};L.SetFlags=function(bp,bq){bp.flags=bq;};M=f.CheckedInput=bo.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,M);N=f.DocElemNode=bo.Class({Equals:function(bp){return this.ElKey===bp.ElKey;},GetHashCode:function(){return this.ElKey;}},null,N);N.New=function(bp,bq,br,bs,bt,bu){var bv;return new N((bv={Attr:bp,Children:bq,El:bs,ElKey:bt},(bo.SetOptional(bv,"Delimiters",br),bo.SetOptional(bv,"Render",bu),bv)));};O.Handler=function(bp,bq){return L.Static(function(br){br.addEventListener(bp,function(bs){return(bq(br))(bs);},false);});};O.OnAfterRender=function(bp){return new P({$:4,$0:bp});};O.Value=function(bp){var bq,br;return O.CustomValue(bp,a.id,(bq=a.id,(br=function(bs){return{$:1,$0:bs};},function(bs){return br(bq(bs));})));};O.Checked=function(bp){var bq;bq=function(br){return!y.Equals(bp.RVal(),br.checked)?bp.set_RVal(br.checked):null;};return P.Concat([O.DynamicProp("checked",bp.RView()),O.Handler("change",function(br){return function(bs){return bq(br,bs);};}),O.Handler("click",function(br){return function(bs){return bq(br,bs);};})]);};O.IntValue=function(bp){return O.CustomVar(bp,function(bq,br){var bs;bs=br.get_Input();return bq.value!==bs?void(bq.value=bs):null;},function(bq){var br,bs,bt,bu;br=bq.value;return{$:1,$0:_5.isBlank(br)?(bq.checkValidity?bq.checkValidity():true)?new M({$:2,$0:br}):new M({$:1,$0:br}):(bs=(bt=0,[v.TryParse(br,{get:function(){return bt;},set:function(bv){bt=bv;}}),bt]),bs[0]?(bu=bs[1],new M({$:0,$0:bu,$1:br})):new M({$:1,$0:br}))};});};O.IntValueUnchecked=function(bp){return O.CustomValue(bp,a.String,function(bq){var br;return _5.isBlank(bq)?{$:1,$0:0}:(br=+bq,br!==br>>0?null:{$:1,$0:br});});};O.FloatValue=function(bp){return O.CustomVar(bp,function(bq,br){var bs;bs=br.get_Input();return bq.value!==bs?void(bq.value=bs):null;},function(bq){var br,bs;br=bq.value;return{$:1,$0:_5.isBlank(br)?(bq.checkValidity?bq.checkValidity():true)?new M({$:2,$0:br}):new M({$:1,$0:br}):(bs=+br,a.isNaN(bs)?new M({$:1,$0:br}):new M({$:0,$0:bs,$1:br}))};});};O.FloatValueUnchecked=function(bp){return O.CustomValue(bp,a.String,function(bq){var br;return _5.isBlank(bq)?{$:1,$0:0}:(br=+bq,a.isNaN(br)?null:{$:1,$0:br});});};O.Dynamic=function(bp,bq){return L.Dynamic(bq,function(br){return function(bs){return z.SetAttr(br,bp,bs);};});};O.CustomValue=function(bp,bq,br){return O.CustomVar(bp,function(bs,bt){bs.value=bq(bt);},function(bs){return br(bs.value);});};O.DynamicProp=function(bp,bq){return L.Dynamic(bq,function(br){return function(bs){br[bp]=bs;};});};O.CustomVar=function(bp,bq,br){var bs,bt;bs=function(bu){return bp.RUpdM(function(bv){var bw,bx,by;bw=br(bu);return((bw!=null?bw.$==1:false)?(by=bw.$0,!y.Equals(by,bv))?(bx=[bw,bw.$0],true):false:false)?bx[0]:null;});};bt=function(bu,bv){var bw,bx,by;bw=br(bu);return((bw!=null?bw.$==1:false)?(by=bw.$0,y.Equals(by,bv))?(bx=bw.$0,true):false:false)?null:bq(bu,bv);};return P.Concat([O.Handler("change",function(bu){return function(bv){return bs(bu,bv);};}),O.Handler("input",function(bu){return function(bv){return bs(bu,bv);};}),O.Handler("keypress",function(bu){return function(bv){return bs(bu,bv);};}),O.DynamicCustom(function(bu){return function(bv){return bt(bu,bv);};},bp.RView())]);};O.DynamicCustom=function(bp,bq){return L.Dynamic(bq,bp);};P=f.AttrProxy=bo.Class({},null,P);P.Concat=function(bp){var bq,br;bq=S.ofSeqNonCopying(bp);br=L.EmptyAttr();return S.TreeReduce(br,P.Append,bq);};P.Create=function(bp,bq){return L.Static(function(br){z.SetAttr(br,bp,bq);});};P.Append=function(bp,bq){return L.AppendTree(bp,bq);};Q.string=function(bp,bq,br){return bq==null?(br!=null?br.$==1:false)?bp.slice(0,br.$0+1):"":br==null?bp.slice(bq.$0):bp.slice(bq.$0,br.$0+1);};R.concat=function(bp,bq){return m.ofSeq(bq).join(bp);};R.SplitChars=function(bp,bq,br){var bs;bs="["+R.RegexEscape(a.String.fromCharCode.apply(void 0,bq))+"]";return R.Split(bp,new a.RegExp(bs),br);};R.StartsWith=function(bp,bq){return bp.substring(0,bq.length)==bq;};R.Replace=function(bp,bq,br){function bs(bt){var bu,bv,bw,bx;bu=bt.indexOf(bq);return bu!==-1?(bv=R.ReplaceOnce(bt,bq,br),(bw=bu+br.length,(bx=bu+br.length,R.Substring(bv,0,bx))+bs(bv.substring(bw)))):bt;}return bs(bp);};R.RegexEscape=function(bp){return bp.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};R.Split=function(bp,bq,br){var bs;bs=R.SplitWith(bp,bq);return br===1?m.filter(function(bt){return bt!=="";},bs):bs;};R.forall=function(bp,bq){return E.forall(bp,R.protect(bq));};R.ReplaceOnce=function(bp,bq,br){return bp.replace(bq,br);};R.SplitWith=function(bp,bq){return bp.split(bq);};R.protect=function(bp){return bp===null?"":bp;};R.Substring=function(bp,bq,br){return bp.substr(bq,br);};S.TreeReduce=function(bp,bq,br){var bs;function bt(bu,bv){var bw,bx;return bv<=0?bp:(bv===1?(bu>=0?bu<bs:false)?true:false:false)?m.get(br,bu):(bx=bv/2>>0,bq(bt(bu,bx),bt(bu+bx,bv-bx)));}bs=m.length(br);return bt(0,bs);};S.mapInPlace=function(bp,bq){var br,bs;for(br=0,bs=bq.length-1;br<=bs;br++)bq[br]=bp(bq[br]);return bq;};S.ofSeqNonCopying=function(bp){var bq,br,bs;if(bp instanceof a.Array)return bp;else if(bp instanceof k)return m.ofList(bp);else if(bp===null)return[];else{bq=[];br=U.Get(bp);try{while(br.MoveNext()){bs=bq.push(br.Current());}return bq;}finally{if("Dispose"in br)br.Dispose();}}};S.MapTreeReduce=function(bp,bq,br,bs){var bt;function bu(bv,bw){var bx,by;return bw<=0?bq:(bw===1?(bv>=0?bv<bt:false)?true:false:false)?bp(m.get(bs,bv)):(by=bw/2>>0,br(bu(bv,by),bu(bv+by,bw-by)));}bt=m.length(bs);return bu(0,bt);};T=f.Elt=bo.Class({},u,T);T.TreeNode=function(bp,bq){var br,bs,bt,bu,bv,bw,bx,by;br=g.Create$1(bq);bs=(bt=(bu=(bv=function(bz){return bz[1];},function(bz){return L.Updates(bv(bz));}),function(bz){return m.map(bu,bz);}(bp.Attrs)),(bw=B.Const(),S.TreeReduce(bw,B.Map2Unit,bt)));bx=(by=br.v,B.Bind(function(bz){return B.Map2Unit(bs,bz);},by));return new T.New$1({$:6,$0:bp},bx,m.get(bp.Els,0),br);};T.New$1=bo.Ctor(function(bp,bq,br,bs){u.New.call(this,bp,bq);this.docNode$1=bp;this.updates$1=bq;this.elt=br;this.rvUpdates=bs;},T);U.Get=function(bp){return bp instanceof a.Array?U.ArrayEnumerator(bp):y.Equals(typeof bp,"string")?U.StringEnumerator(bp):bp.GetEnumerator();};U.ArrayEnumerator=function(bp){return new _9.New(0,null,function(bq){var br;br=bq.s;return br<m.length(bp)?(bq.c=m.get(bp,br),bq.s=br+1,true):false;},void 0);};U.StringEnumerator=function(bp){return new _9.New(0,null,function(bq){var br;br=bq.s;return br<bp.length?(bq.c=bp.charCodeAt(br),bq.s=br+1,true):false;},void 0);};U.Get0=function(bp){return bp instanceof a.Array?U.ArrayEnumerator(bp):y.Equals(typeof bp,"string")?U.StringEnumerator(bp):"GetEnumerator0"in bp?bp.GetEnumerator0():bp.GetEnumerator();};W.New=function(bp,bq){return{PreviousNodes:bp,Top:bq};};X.get_Empty=function(){return{$:0,$0:new _1.New$3()};};X.FindAll=function(bp){var bq;function br(bt){var bu,bv,bw;if(bt.$==0){bu=bt.$1;br(bt.$0);br(bu);}else if(bt.$==1)bs(bt.$0);else if(bt.$==2)br(bt.$0.Current);else if(bt.$==6){bv=bt.$0;bw=bv.Holes;m.iter(bs,bw);}}function bs(bt){bq.push(bt);br(bt.Children);}bq=[];br(bp);return{$:0,$0:new _1.New$2(bq)};};X.Filter=function(bp,bq){var br;br=bq.$0;return{$:0,$0:bd.Filter(bp,br)};};X.Intersect=function(bp,bq){var br,bs;br=bp.$0;bs=bq.$0;return{$:0,$0:bd.Intersect(br,bs)};};X.ToArray=function(bp){return bd.ToArray(bp.$0);};X.Except=function(bp,bq){var br,bs;br=bp.$0;bs=bq.$0;return{$:0,$0:bd.Except(br,bs)};};Y.get_UseAnimations=function(){return _7.UseAnimations();};Y.Play=function(bp){return _6.Delay(function(){var bq,br;bq=(br=function(){},function(bs){return Y.Run(br,bs);}(_7.Actions(bp)));return _6.Bind(bq,function(){_7.Finalize(bp);return _6.Return(null);});});};Y.Append=function(bp,bq){var br,bs;br=bp.$0;bs=bq.$0;return{$:0,$0:_8.Append(br,bs)};};Y.Concat=function(bp){return{$:0,$0:_8.Concat(E.map(_7.List,bp))};};Y.Run=function(bp,bq){var br,bs;br=bq.Duration;bs=function(bt){var bu;function bv(bw,bx){var by,bz;by=bx-bw;bq.Compute(by);bp();return by<=br?(bz=a.requestAnimationFrame(function(bA){bv(bw,bA);}),void 0):bt();}bu=a.requestAnimationFrame(function(bw){bv(bw,bw);});};return _6.FromContinuations(function(bt,bu,bv){return bs.apply(null,[bt,bu,bv]);});};Y.get_Empty=function(){return{$:0,$0:_8.Empty()};};Z.Schedule=function(bp){_6.Start(_6.Delay(function(){bp();return _6.Return(null);}),null);};_0=J.ArrayStorage=bo.Class({SSetAt:function(bp,bq,br){m.set(br,bp,bq);return br;},SAppend:function(bp,bq){var br;br=bq.push(bp);return bq;},SInit:function(){return this.init;}},null,_0);_0.New=bo.Ctor(function(bp){this.init=bp;},_0);_1=w.HashSet=bo.Class({Contains:function(bp){var bq;bq=this.data[this.hash(bp)];return bq==null?false:this.arrContains(bp,bq);},Add:function(bp){return this.add(bp);},arrContains:function(bp,bq){var br,bs,bt,bu;br=true;bs=0;bu=bq.length;while(br?bs<bu:false)if(this.equals.apply(null,[bq[bs],bp]))br=false;else bs=bs+1;return!br;},add:function(bp){var bq,br,bs;bq=this.hash(bp);br=this.data[bq];return br==null?(this.data[bq]=[bp],this.count=this.count+1,true):this.arrContains(bp,br)?false:(bs=br.push(bp),this.count=this.count+1,true);},IntersectWith:function(bp){var bq,br,bs,bt,bu,bv;bq=new _1.New$4(bp,this.equals,this.hash);br=bk.concat(this.data);for(bs=0,bt=br.length-1;bs<=bt;bs++){bu=br[bs];!bq.Contains(bu)?bv=this.Remove(bu):void 0;}},get_Count:function(){return this.count;},CopyTo:function(bp){var bq,br,bs,bt;bq=0;br=bk.concat(this.data);for(bs=0,bt=br.length-1;bs<=bt;bs++)m.set(bp,bs,br[bs]);},ExceptWith:function(bp){var bq,br;bq=U.Get(bp);try{while(bq.MoveNext()){br=this.Remove(bq.Current());}}finally{if("Dispose"in bq)bq.Dispose();}},Remove:function(bp){var bq;bq=this.data[this.hash(bp)];return bq==null?false:this.arrRemove(bp,bq)?(this.count=this.count-1,true):false;},arrRemove:function(bp,bq){var br,bs,bt,bu,bv;br=true;bs=0;bu=bq.length;while(br?bs<bu:false)if(this.equals.apply(null,[bq[bs],bp])){bv=bq.splice.apply(bq,[bs,1].concat([]));br=false;}else bs=bs+1;return!br;},GetEnumerator:function(){return U.Get(bk.concat(this.data));},GetEnumerator0:function(){return U.Get(bk.concat(this.data));}},null,_1);_1.New$3=bo.Ctor(function(){_1.New$4.call(this,[],y.Equals,y.Hash);},_1);_1.New$2=bo.Ctor(function(bp){_1.New$4.call(this,bp,y.Equals,y.Hash);},_1);_1.New$4=bo.Ctor(function(bp,bq,br){var bs,bt;this.equals=bq;this.hash=br;this.data=a.Array.prototype.constructor.apply(a.Array,[]);this.count=0;bs=U.Get(bp);try{while(bs.MoveNext()){bt=this.add(bs.Current());}}finally{if("Dispose"in bs)bs.Dispose();}},_1);_2.notPresent=function(){return h.FailWith("The given key was not present in the dictionary.");};_4.New=function(bp,bq,br,bs){var bt;bt={DynElem:bp,DynFlags:bq,DynNodes:br};bo.SetOptional(bt,"OnAfterRender",bs);return bt;};_5.isBlank=function(bp){return R.forall(_.IsWhiteSpace,bp);};_6.Delay=function(bp){return function(bq){try{(bp(null))(bq);}catch(br){bq.k({$:1,$0:br});}};};_6.Bind=function(bp,bq){return _6.checkCancel(function(br){bp({k:function(bs){var bt;if(bs.$==0){bt=bs.$0;_6.scheduler().Fork(function(){try{(bq(bt))(br);}catch(bu){br.k({$:1,$0:bu});}});}else _6.scheduler().Fork(function(){br.k(bs);});},ct:br.ct});});};_6.Return=function(bp){return function(bq){bq.k({$:0,$0:bp});};};_6.Start=function(bp,bq){var br;br=h.DefaultArg(bq,(_6.defCTS())[0]);_6.scheduler().Fork(function(){if(!br.c)bp({k:function(bs){if(bs.$==1)_6.UncaughtAsyncError(bs.$0);},ct:br});});};_6.FromContinuations=function(bp){return function(bq){var br,bs;br=[false];bs=function(bt){if(br[0])h.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{br[0]=true;_6.scheduler().Fork(bt);}};bp(function(bt){bs(function(){bq.k({$:0,$0:bt});});},function(bt){bs(function(){bq.k({$:1,$0:bt});});},function(bt){bs(function(){bq.k({$:2,$0:bt});});});};};_6.checkCancel=function(bp){return function(bq){if(bq.ct.c)_6.cancel(bq);else bp(bq);};};_6.defCTS=function(){bf.$cctor();return bf.defCTS;};_6.UncaughtAsyncError=function(bp){a.console.log.apply(a.console,["WebSharper: Uncaught asynchronous exception"].concat([bp]));};_6.cancel=function(bp){bp.k({$:2,$0:new bi.New(bp.ct)});};_6.scheduler=function(){bf.$cctor();return bf.scheduler;};_7.UseAnimations=function(){bc.$cctor();return bc.UseAnimations;};_7.Actions=function(bp){var bq,br;bq=bp.$0;return _7.ConcatActions((br=function(bs){return bs.$==1?{$:1,$0:bs.$0}:null;},function(bs){return m.choose(br,bs);}(_8.ToArray(bq))));};_7.Finalize=function(bp){var bq,br;bq=bp.$0;br=function(bs){if(bs.$==0)bs.$0();};(function(bs){m.iter(br,bs);}(_8.ToArray(bq)));};_7.List=function(bp){return bp.$0;};_7.ConcatActions=function(bp){var bq,br,bs,bt,bu;bq=S.ofSeqNonCopying(bp);br=m.length(bq);return br===0?_7.Const():br===1?m.get(bq,0):(bs=E.max((bt=function(bv){return bv.Duration;},function(bv){return E.map(bt,bv);}(bq))),(bu=m.map(function(bv){return _7.Prolong(bs,bv);},bq),_7.Def(bs,function(bv){m.iter(function(bw){bw.Compute(bv);},bu);})));};_7.Const=function(bp){return _7.Def(0,function(){return bp;});};_7.Prolong=function(bp,bq){var br,bs,bt;br=bq.Compute;bs=bq.Duration;bt=bm.Create(function(){return bq.Compute(bq.Duration);});return{Compute:function(bu){return bu>=bs?bt.f():br(bu);},Duration:bp};};_7.Def=function(bp,bq){return{Compute:bq,Duration:bp};};_8.Append=function(bp,bq){return bp.$==0?bq:bq.$==0?bp:{$:2,$0:bp,$1:bq};};_8.Concat=function(bp){var bq,br;bq=S.ofSeqNonCopying(bp);br=_8.Empty();return S.TreeReduce(br,_8.Append,bq);};_8.ToArray=function(bp){var bq;function br(bs){var bt,bu;if(bs.$==1)bq.push(bs.$0);else if(bs.$==2){bt=bs.$1;br(bs.$0);br(bt);}else if(bs.$==3){bu=bs.$0;m.iter(function(bv){bq.push(bv);},bu);}}bq=[];br(bp);return bq.slice(0);};_8.Empty=function(){bl.$cctor();return bl.Empty;};_9=U.T=bo.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},null,_9);_9.New=bo.Ctor(function(bp,bq,br,bs){this.s=bp;this.c=bq;this.n=br;this.d=bs;},_9);_.IsWhiteSpace=function(bp){return a.String.fromCharCode(bp).match(new a.RegExp("\\s"))!==null;};$.TryParse=function(bp,bq,br,bs){var bt,bu;bt=+bp;bu=(bt===bt-bt%1?bt>=bq:false)?bt<=br:false;bu?bs.set(bt):void 0;return bu;};ba=f.DynamicAttrNode=bo.Class({NChanged:function(){return this.updates;},NGetChangeAnim:function(bp){return Y.get_Empty();},NGetEnterAnim:function(bp){return Y.get_Empty();},NGetExitAnim:function(bp){return Y.get_Empty();},NSync:function(bp){if(this.dirty){(this.push(bp))(this.value);this.dirty=false;}}},null,ba);ba.New=bo.Ctor(function(bp,bq){var br,bs;br=this;this.push=bq;this.value=void 0;this.dirty=false;this.updates=(bs=function(bt){br.value=bt;br.dirty=true;},function(bt){return B.Map(bs,bt);}(bp));},ba);bb.$cctor=bo.Cctor(function(){bb.EmptyAttr=null;bb.$cctor=a.ignore;});bc.$cctor=bo.Cctor(function(){bc.CubicInOut=bg.Custom(function(bp){var bq;bq=bp*bp;return 3*bq-2*(bq*bp);});bc.UseAnimations=true;bc.$cctor=a.ignore;});bd.Filter=function(bp,bq){var br;return new _1.New$2((br=bd.ToArray(bq),m.filter(bp,br)));};bd.Intersect=function(bp,bq){var br;br=new _1.New$2(bd.ToArray(bp));br.IntersectWith(bd.ToArray(bq));return br;};bd.ToArray=function(bp){var bq;bq=m.create(bp.get_Count(),void 0);bp.CopyTo(bq);return bq;};bd.Except=function(bp,bq){var br;br=new _1.New$2(bd.ToArray(bq));br.ExceptWith(bd.ToArray(bp));return br;};j.head=function(bp){return bp.$==1?bp.$0:j.listEmpty();};j.tail=function(bp){return bp.$==1?bp.$1:j.listEmpty();};j.listEmpty=function(){return h.FailWith("The input list was empty.");};be=_6.Scheduler=bo.Class({Fork:function(bp){var bq,br;bq=this;this.robin.push(bp);this.idle?(this.idle=false,br=a.setTimeout(function(){bq.tick();},0)):void 0;},tick:function(){var bp,bq,br,bs,bt;bq=this;br=a.Date.now();bp=true;while(bp){bs=this.robin.length;bs===0?(this.idle=true,bp=false):((this.robin.shift())(),a.Date.now()-br>40?(bt=a.setTimeout(function(){bq.tick();},0),bp=false):void 0);}}},null,be);be.New=bo.Ctor(function(){this.idle=true;this.robin=[];},be);bf.$cctor=bo.Cctor(function(){bf.noneCT={c:false,r:[]};bf.scheduler=new be.New();bf.defCTS=[new bj.New()];bf.GetCT=function(bp){bp.k({$:0,$0:bp.ct});};bf.$cctor=a.ignore;});bg=f.Easing=bo.Class({},null,bg);bg.Custom=function(bp){return new bg.New(bp);};bg.New=bo.Ctor(function(bp){this.transformTime=bp;},bg);bh.DocChildren=function(bp){var bq;function br(bs){var bt,bu,bv;if(bs.$==2)br(bs.$0.Current);else if(bs.$==1)bq.push(bs.$0.El);else if(bs.$==3);else if(bs.$==5)bq.push(bs.$0);else if(bs.$==4)bq.push(bs.$0.Text);else if(bs.$==6){bt=bs.$0;bu=function(bw){if(bw.constructor===a.Object)br(bw);else bq.push(bw);};(function(bw){m.iter(bu,bw);}(bt.Els));}else{bv=bs.$1;br(bs.$0);br(bv);}}bq=[];br(bp.Children);return{$:0,$0:S.ofSeqNonCopying(bq)};};bh.Children=function(bp,bq){var br,bs,bt,bu,bv,bw;if(bq!=null?bq.$==1:false){bt=bq.$0[1];bu=bq.$0[0];bv=a.Array.prototype.constructor.apply(a.Array,[]);br=bu.nextSibling;while(br!==bt){bw=bv.push(br);br=br.nextSibling;}return{$:0,$0:bv};}else return{$:0,$0:m.init(bp.childNodes.length,(bs=bp.childNodes,function(bx){return bs[bx];}))};};bh.Except=function(bp,bq){var br,bs,bt;br=bp.$0;bs=bq.$0;return{$:0,$0:(bt=function(bu){var bv;bv=function(bw){return!(bu===bw);};return function(bw){return m.forall(bv,bw);}(br);},function(bu){return m.filter(bt,bu);}(bs))};};bh.Iter=function(bp,bq){var br;br=bq.$0;m.iter(bp,br);};bi=d.OperationCanceledException=bo.Class({},null,bi);bi.New=bo.Ctor(function(bp){bi.New$1.call(this,"The operation was canceled.",null,bp);},bi);bi.New$1=bo.Ctor(function(bp,bq,br){this.message=bp;this.inner=bq;this.ct=br;},bi);bj=d.CancellationTokenSource=bo.Class({},null,bj);bj.New=bo.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},bj);bk.concat=function(bp){var bq,br;bq=[];for(var bs in bp)bq.push.apply(bq,bp[bs]);return bq;};bl.$cctor=bo.Cctor(function(){bl.Empty={$:0};bl.$cctor=a.ignore;});bm.Create=function(bp){return{c:false,v:bp,f:bm.forceLazy};};bm.forceLazy=function(){var bp;bp=this.v();this.c=true;this.v=bp;this.f=bm.cachedLazy;return bp;};bm.cachedLazy=function(){return this.v;};c.Main();}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
